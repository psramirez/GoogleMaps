<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 80%; width: 100%; z-index: -1 }
      #formula { height: 100%; width: 29%}
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDltsG1DK1kQ4zpFQ5PHM-3jmp_0PcFAfU&sensor=true">//Sensor true o false
    </script>
    <script type="text/javascript">
      var points = [];
      var i = 0;
      var mapOptions;
      var marker = [];
      var map;
      function initialize(address) {
          mapOptions = {
          center: new google.maps.LatLng(40.505691, -3.831482),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
        if(address){
            initializes(address,i);
            points[i] = address;
            i++;
        }
      }
      function initializes(address,i) {
	var geoCoder = new google.maps.Geocoder(address)
	var request = {address:address};
	geoCoder.geocode(request, function(result, status){
		var latlng = new google.maps.LatLng(result[0].geometry.location.lat(), result[0].geometry.location.lng());
		var myOptions = {
		  zoom: 15,
		  center: latlng,
		  mapTypeId: google.maps.MapTypeId.ROADMAP
		};
        //map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);//new google.maps.Map(document.getElementById("map_canvas"),myOptions);
		marker[i] = new google.maps.Marker({position:latlng,map:map,title:address},marker[i-1]);
	})
  }
    </script>
    <script>
    $(document).ready(function(){
        //initialize('Madrid');
        $('#event').bind('click',function(){
            initialize($('#address').val());    
        });
    })
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas"></div>
    <div id="formula">
        <form action="index.html">
            <input id="address" type="text" placeholder="Direccion Evento">
            <input id="event" type="button" value="Crear evento">
        </form>
    </div>
  </body>
</html>